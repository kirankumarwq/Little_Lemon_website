{
    "sourceFile": "src/components/pages/auth/Profile.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1739105242964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739105517216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useState, useEffect } from \"react\";\r\n-import { auth } from \"../../firebaseConfig\";\r\n+import { auth } from \"../../../firebaseConfig\";\r\n import { updateProfile, updateEmail, updatePassword } from \"firebase/auth\";\r\n import { useNavigate } from \"react-router-dom\";\r\n import \"./auth.css\";\r\n \r\n"
                },
                {
                    "date": 1739107776579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import React, { useState, useEffect } from \"react\";\r\n-import { auth } from \"../../../firebaseConfig\";\r\n-import { updateProfile, updateEmail, updatePassword } from \"firebase/auth\";\r\n+import { auth } from \";\r\n+import { updateProfile, updateEmail, updatePassword } from \r\n import { useNavigate } from \"react-router-dom\";\r\n import \"./auth.css\";\r\n \r\n const Profile = () => {\r\n"
                },
                {
                    "date": 1739108665038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,48 +1,41 @@\n import React, { useState, useEffect } from \"react\";\r\n-import { auth } from \";\r\n-import { updateProfile, updateEmail, updatePassword } from \r\n+import { supabase } from \"../../supabaseConfig\";\r\n import { useNavigate } from \"react-router-dom\";\r\n import \"./auth.css\";\r\n \r\n const Profile = () => {\r\n-  const user = auth.currentUser;\r\n   const navigate = useNavigate();\r\n-\r\n-  const [name, setName] = useState(user?.displayName || \"\");\r\n-  const [email, setEmail] = useState(user?.email || \"\");\r\n-  const [password, setPassword] = useState(\"\");\r\n+  const [user, setUser] = useState(null);\r\n+  const [name, setName] = useState(\"\");\r\n+  const [email, setEmail] = useState(\"\");\r\n   const [message, setMessage] = useState(\"\");\r\n \r\n   useEffect(() => {\r\n-    if (user) {\r\n-      setName(user.displayName || \"\");\r\n-      setEmail(user.email || \"\");\r\n-    }\r\n-  }, [user]);\r\n+    const fetchUser = async () => {\r\n+      const { data: user, error } = await supabase.auth.getUser();\r\n+      if (error) setMessage(error.message);\r\n+      else {\r\n+        setUser(user);\r\n+        setName(user?.user_metadata?.full_name || \"\");\r\n+        setEmail(user?.email || \"\");\r\n+      }\r\n+    };\r\n+    fetchUser();\r\n+  }, []);\r\n \r\n   const handleUpdateProfile = async (e) => {\r\n     e.preventDefault();\r\n-    setMessage(\"\");\r\n-\r\n-    try {\r\n-      if (name !== user.displayName) {\r\n-        await updateProfile(user, { displayName: name });\r\n-      }\r\n-      if (email !== user.email) {\r\n-        await updateEmail(user, email);\r\n-      }\r\n-      if (password) {\r\n-        await updatePassword(user, password);\r\n-      }\r\n-      setMessage(\"Profile updated successfully!\");\r\n-    } catch (error) {\r\n-      setMessage(error.message);\r\n-    }\r\n+    const { error } = await supabase.auth.updateUser({\r\n+      data: { full_name: name },\r\n+      email,\r\n+    });\r\n+    if (error) setMessage(error.message);\r\n+    else setMessage(\"Profile updated!\");\r\n   };\r\n \r\n   const handleLogout = async () => {\r\n-    await auth.signOut();\r\n+    await supabase.auth.signOut();\r\n     navigate(\"/login\");\r\n   };\r\n \r\n   return (\r\n@@ -50,10 +43,9 @@\n       <h2>Update Profile</h2>\r\n       {message && <p className=\"message\">{message}</p>}\r\n       <form onSubmit={handleUpdateProfile}>\r\n         <input type=\"text\" placeholder=\"Name\" value={name} onChange={(e) => setName(e.target.value)} />\r\n-        <input type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\r\n-        <input type=\"password\" placeholder=\"New Password (optional)\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n+        <input type=\"email\" placeholder=\"Email\" value={email} disabled />\r\n         <button type=\"submit\">Update Profile</button>\r\n       </form>\r\n       <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\r\n     </div>\r\n"
                },
                {
                    "date": 1739108762944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useState, useEffect } from \"react\";\r\n-import { supabase } from \"../../supabaseConfig\";\r\n+import { supabase } from \"../.../supabaseConfig\";\r\n import { useNavigate } from \"react-router-dom\";\r\n import \"./auth.css\";\r\n \r\n const Profile = () => {\r\n"
                },
                {
                    "date": 1739108877168,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useState, useEffect } from \"react\";\r\n-import { supabase } from \"../.../supabaseConfig\";\r\n+import { supabase } from \"../../../supabaseConfig\";\r\n import { useNavigate } from \"react-router-dom\";\r\n import \"./auth.css\";\r\n \r\n const Profile = () => {\r\n"
                }
            ],
            "date": 1739105242964,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\r\nimport { auth } from \"../../firebaseConfig\";\r\nimport { updateProfile, updateEmail, updatePassword } from \"firebase/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./auth.css\";\r\n\r\nconst Profile = () => {\r\n  const user = auth.currentUser;\r\n  const navigate = useNavigate();\r\n\r\n  const [name, setName] = useState(user?.displayName || \"\");\r\n  const [email, setEmail] = useState(user?.email || \"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setName(user.displayName || \"\");\r\n      setEmail(user.email || \"\");\r\n    }\r\n  }, [user]);\r\n\r\n  const handleUpdateProfile = async (e) => {\r\n    e.preventDefault();\r\n    setMessage(\"\");\r\n\r\n    try {\r\n      if (name !== user.displayName) {\r\n        await updateProfile(user, { displayName: name });\r\n      }\r\n      if (email !== user.email) {\r\n        await updateEmail(user, email);\r\n      }\r\n      if (password) {\r\n        await updatePassword(user, password);\r\n      }\r\n      setMessage(\"Profile updated successfully!\");\r\n    } catch (error) {\r\n      setMessage(error.message);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await auth.signOut();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n      <h2>Update Profile</h2>\r\n      {message && <p className=\"message\">{message}</p>}\r\n      <form onSubmit={handleUpdateProfile}>\r\n        <input type=\"text\" placeholder=\"Name\" value={name} onChange={(e) => setName(e.target.value)} />\r\n        <input type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\r\n        <input type=\"password\" placeholder=\"New Password (optional)\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n        <button type=\"submit\">Update Profile</button>\r\n      </form>\r\n      <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"
        }
    ]
}